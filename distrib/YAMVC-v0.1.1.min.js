/*! YAMVC v0.1.1 - 2013-12-14 
 *  License:  */
(function(t){"use strict";function e(){for(var t=0,e=o.length;e>t;t++)o[t]()}var n,i,r=t.yamvc||{},o=[];n=r.Base||function(){function t(){this.set("listeners",{}),this.set("suspendEvents",!1),this.bindMethods.apply(this,arguments),this.init.apply(this,arguments)}return t.prototype.init=function(){},t.prototype.initConfig=function(){var t,e,n,i=this,r=i.get("config"),o=function(n){t="get"+n.charAt(0).toUpperCase()+n.slice(1),e="set"+n.charAt(0).toUpperCase()+n.slice(1),i[t]=function(){return i.get("config")[n]},i[e]=function(t,e){i.set(t,e)}};for(n in r)r.hasOwnProperty(n)&&o(n)},t.prototype.bindMethods=function(t){for(var e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(this[e]=t[e].bind(this))},t.prototype.set=function(t,e){var n="_"+t,i=this[n];return e!==i&&(this[n]=e,this.fireEvent(t+"Change",this,e,i)),this},t.prototype.get=function(t){return this["_"+t]},t.prototype.fireEvent=function(t){if(this._suspendEvents)return!0;var e=!0,n=Array.prototype.shift;n.call(arguments);for(var i=0,r=this._listeners[t]||[],o=r.length;o>i;i++)if(e){var s=n.call(arguments);e=r[i].apply(s,arguments)}return e},t.prototype.addListener=function(t,e){var n=this._listeners[t]||[];return n.push(e),this._listeners[t]=n,this},t.prototype.removeListener=function(t,e){var n,i=this._listeners;if(i)if(e){if("function"==typeof e)for(var r=0,o=i.length;o>r;r++)i[r]===e&&(n=r);else n=e;i.splice(n,1)}else this._listeners=[];return this},t.prototype.onChange=function(t,e){return this.addListener(t+"Change",e),this},t.prototype.unbindOnChange=function(t,e){for(var n=this._listeners[t+"Change"]||[],i=0,r=n.length;r>i;i++)n[i]===e&&n.splice(i,1);return this._listeners[t+"Change"]=n,this},t.prototype.suspendEvents=function(t){return t=t||!0,this.set("suspendEvents",t),this},t.onReady=function(t){o.push(t),i||"complete"===document.readyState||(i=setInterval(function(){"complete"===document.readyState&&(clearInterval(i),e())},10))},t.extend=function(e){var n=this,i=function(){e.prototype.constructor.apply(this,arguments)};for(var r in n.prototype)n.prototype.hasOwnProperty(r)&&(i.prototype[r]=n.prototype[r]);return i.extend=t.extend,i},t}(),r.Base=n,t.yamvc=r})(window),function(t){"use strict";var e,n,i=t.yamvc||{};e=i.Base.extend(function(){i.Base.apply(this,arguments)}),e.prototype.init=function(t){var e,r=this;return t=t||{},e=t.config||{},n=n||new i.Router,r.set("initOpts",t),r.set("config",e),r.set("routes",e.routes||{}),r.set("events",e.events||{}),r.set("views",e.views||{}),r.initConfig(),r.renderViews(),r},e.prototype.initConfig=function(){i.Base.prototype.initConfig.apply(this);var t=this,e=t.get("routes"),r=t.get("events"),o=t.get("views");if(e)for(var s in e)if(e.hasOwnProperty(s)){var p=t[e[s]].bind(t);n.when(s,p)}if(r&&o)for(var a in o)o.hasOwnProperty(a)&&o[a].addListener("render",t.resolveEvents.bind(t));return this},e.prototype.renderViews=function(){var t=this,e=t.get("views");for(var n in e)e.hasOwnProperty(n)&&e[n].getAutoCreate&&e[n].getAutoCreate()&&e[n].render()},e.prototype.resolveEvents=function(t){var e,n=this.get("events");for(var i in n)if(n.hasOwnProperty(i)){e=n[i];for(var r=t.get("el").querySelectorAll(i),o=0,s=r.length;s>o;o++)for(var p in e)e.hasOwnProperty(p)&&r[o].addEventListener(p,e[p].bind(this,t))}},e.prototype.getRouter=function(){return n},e.prototype.redirectTo=function(e){return t.location.hash=e,this},t.yamvc.Controller=e}(window),function(t){"use strict";var e,n=t.yamvc||{};e=n.Base.extend(function(){n.Base.apply(this)}),e.prototype.init=function(){this.set("routing",{}),this.bindEvents()},e.prototype.bindEvents=function(){return t.onhashchange=this.onHashChange.bind(this),this},e.prototype.onHashChange=function(){var e=this.get("routing"),n=t.location.hash.substr(1),i=n.split("/"),r=i.shift();if(e[r]){var o=[];if(e[r].params)for(var s=0,p=e[r].params.length;p>s;s++){var a=e[r].params[s],h=i[s],u=RegExp(a.substr(1,a.length-2));o.push(h.match(u).input)}e[r].callback.apply(null,o)}return this},e.prototype.restore=function(){return this.onHashChange(),this},e.prototype.when=function(t,e){var n=this.get("routing"),i=t.split("/"),r=i.shift();return n[r]={callback:e,params:i},this.set("routing",n),this},t.yamvc.Router=e}(window),function(t){"use strict";var e,n,i,r=t.yamvc||{};e=r.ViewManager={views:{},i:0,add:function(t,e){this.views[t]=e,this.i++},get:function(t){return this.views[t]}},n={tpl:{},add:function(t,e){this.tpl[t]=e},get:function(t){return this.tpl[t]}},i=r.Base.extend(function(){r.Base.apply(this,arguments)}),i.prototype.init=function(t){var n,i;t=t||{},n=t.config||{},n.id=i=n.id||"view-"+e.i,n.views=n.views||{},this.set("initOpts",t),this.set("config",n),this.initConfig(),e.add(i,this)},i.prototype.initConfig=function(){r.Base.prototype.initConfig.apply(this);var t,e=this,i=e.get("config"),o=document.createElement("div");if(!i.tpl)throw Error("no tpl set");if(!n.get(i.tpl)){if(t=document.getElementById(i.tpl),!t)throw Error("no tpl "+i.tpl+" found");n.add(i.tpl,t.parentNode.removeChild(t))}o.innerHTML=n.get(i.tpl).innerHTML,e.set("tpl",o)},i.prototype.render=function(t){var e,n,i=this,r=i.get("tpl"),o=i.get("config"),s=o.renderTo,p=t||o.models,a=o.parent,h=o.parent;if(a?a=s?a.querySelectorAll(s).item(0):a.get("el"):s&&(a=document.querySelectorAll(s).item(0)),p){n=r.innerHTML;var u=n.match(/\{\{(.*?)\}\}/gi);if(u)for(var c=0,f=u.length;f>c;c++){var l=u[c],d=l.substr(2,l.length-4);n=p[d]!==undefined?n.replace(l,p[d]):n.replace(l,"")}r.innerHTML=n}for(var v=0;r.childNodes.length>v&&1!==r.childNodes.item(v).nodeType;)v++;return e=r.childNodes.item(v),e.setAttribute("yamvc-id",o.id),i.set("el",e),a&&(a.appendChild(e),h&&(h.views=h.views||{},h.views[o.id]=i),i.set("isInDOM",!0),i.reAppendChildren(),i.fireEvent("render",null,i)),r.childNodes.item(0)},i.prototype.addChild=function(t,e){t.appendTo(this,e),this.fireEvent("elementAdded",this,t)},i.prototype.removeChildren=function(){for(var t=this.get("config").views||[],e=0,n=t.length;n>e;e++)t[e].clear()},i.prototype.clear=function(){var t=this,e=t.get("el");t.isInDOM()&&(e.parentNode.removeChild(e),t.set("isInDOM",!1))},i.prototype.isInDOM=function(){return this._isInDOM},i.prototype.appendTo=function(t,e){var n=this,i=n.get("config"),r=i.id,o=t.get("config").views,s=e?t.get("el").querySelector(e):t.get("el");e&&(i.renderTo=e),i.parent&&i.parent.get("config").id!==t.get("config").id&&delete i.parent.get("config").views[r],!n.isInDOM()&&t.isInDOM()&&(n.get("el")?(s.appendChild(n.get("el")),n.set("isInDOM",!0),n.reAppendChildren(),n.fireEvent("render",null,n)):n.render()),o[r]=n,i.parent=t},i.prototype.reAppendChildren=function(){var t=this.get("config").views;for(var e in t)t.hasOwnProperty(e)&&t[e].appendTo(this)},t.yamvc.View=i}(window);
//@ sourceMappingURL=YAMVC-v0.1.1.min.js.map