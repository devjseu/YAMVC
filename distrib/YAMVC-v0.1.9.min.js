/*! YAMVC v0.1.9 - 2014-01-16 
 *  License:  */
(function(t){"use strict";var e,n=t.yamvc||{};e=n.Core.extend({defaults:{proxy:null},init:function(t){e.Parent.init.apply(this,arguments);var r,i=this;t=t||{},r=n.merge(i._config,t.config),i.set("initOpts",t),i.set("config",r),i.set("set",[]),i.set("cache",[]),i.set("removed",[]),i.set("filters",[]),i.initConfig(),i.initData()},initData:function(){var t=this,e=t.get("initOpts"),n=(t.get("config"),e.data||[]);return t.set("raw",n),t.prepareData(n),t},add:function(t){var e,n=this,r=n.getModel(),i=n.getModelConfig().namespace;for(Array.isArray(t)||(t=[t]);t.length;)e=t.pop(),e=new r({config:{namespace:i},data:e}),n._cache.push(e),n.fireEvent("cacheChanged");n.filter()},count:function(){return this._set.length},clear:function(){var t=this;return t.set("set",[]),t.set("cache",[]),t.set("removed",[]),t},clearFilters:function(){var t=this;return t.set("filters",[]),t.filter(),this},filter:function(t){var e,n=this,r=n._filters,i=!0,o=[],s=n._cache,a=0;"function"==typeof t&&(r.push(t),n.fireEvent("filtersChanged"));for(var u=0,c=s.length;c>u;u++){for(i=!0,a=r.length;a--;)e=r[a],i=i&&e(s[u]);i&&o.push(s[u])}return n.set("set",o),n},getAt:function(t){return this._set[t]},getBy:function(t){for(var e=this,n=e._set,r=[],i=0,o=n.length;o>i;i++)t(n[i])&&r.push(n[i]);return r},getOneBy:function(t){for(var e,n=this,r=n._set,i=r.length;i--;)if(t(r[i])){e=r[i];break}return e},getTotal:function(){return this._total},load:function(t){var e,r,i=this,o=(i.get("data"),i.get("idProperty"),n.Promise.deferred()),s=i.getModelConfig().namespace,a=0;for(r in t)a++;if(0===a)throw Error("You need to pass at least one condition to load model collection");if(!i.getProxy())throw Error("To load collection you need to set proxy");return e=function(){"success"===i.getProxy().getStatus()?i.fireEvent("loaded",i,i.getProxy().getResponse(),"read"):i.fireEvent("error",i,"read")},i.getProxy().read(s,t,e),o.promise},save:function(){for(var t,e,r,i=this,o=n.Promise.deferred(),s=[],a=[],u=i._removed,c=i._cache,f=i.getModelConfig(),l=f.namespace,d=i.getProxy(),h=0,p=0,g=c.length;g>p;p++)e=c[p],e._isDirty&&(e.hasId()?a.push(e._data):s.push(e._data));return r=function(t){return function(e){return e.data("__clientId__")===t}},t=function(t){var e,r;if(h--,t.getStatus()===n.data.Proxy.Status.SUCCESS)for(e=t.getResponse().result.slice(0);e.length;)r=e.pop();0===h&&o.resolve({scope:i})},s.length&&(h++,d.create(l,s,t)),a.length&&(h++,d.update(l,a,t)),u.length&&(h++,d.destroy(l,u,t)),o.promise},prepareData:function(t,e){var n=this,r=n.getModel(),i=n.getModelConfig?n.getModelConfig():{},o=t.length,s=[];e=e||o;for(var a=0;o>a;a++)s.push(new r({data:t[a],config:i}));return n.set("cache",s),n.set("total",e),n.filter(),n},setData:function(){var t=this;return t.setRawData(data),t.prepareData(data),t},getData:function(){return this._set},getRawData:function(){return this._raw},setRawData:function(t){return this.set("raw",t),this}}),t.yamvc=n,t.yamvc.Collection=e})(window),function(t){"use strict";var e,n,r=t.yamvc||{};e=r.Core.extend({init:function(t){var e,i=this;return t=t||{},e=t.config||{},n=n||new r.Router,i.set("initOpts",t),i.set("config",e),i.set("routes",e.routes||{}),i.set("events",e.events||{}),i.set("views",e.views||{}),i.initConfig(),i.renderViews(),i.restoreRouter(),i},initConfig:function(){r.Core.prototype.initConfig.apply(this);var t,e,i=this,o=i.get("routes"),s=i.get("events"),a=i.get("views"),u=/(^\$|,$)/;if(o)for(var c in o)if(o.hasOwnProperty(c)){var f=i[o[c]].bind(i);n.when(c,f)}if(s&&a){for(e in a)a.hasOwnProperty(e)&&a[e].addListener("render",i.resolveEvents.bind(i));for(t in s)if(s.hasOwnProperty(t)&&u.test(t)){if(e=a[t.substr(1)])for(var l in s[t])s[t].hasOwnProperty(l)&&e.addListener(l,s[t][l].bind(i,e));delete s[t]}}return this},renderViews:function(){var t=this,e=t.get("views");for(var n in e)e.hasOwnProperty(n)&&e[n].getAutoCreate&&e[n].getAutoCreate()&&e[n].render()},resolveEvents:function(t){var e,n,r=this.get("events"),i=function(t,e,n){return t.bind(e,n)};for(var o in r)if(r.hasOwnProperty(o)){e=r[o];for(var s=t.get("el").querySelectorAll(o),a=0,u=s.length;u>a;a++)for(var c in e)e.hasOwnProperty(c)&&(n=i(e[c],this,t),s[a].addEventListener(c,n))}},getRouter:function(){return n},restoreRouter:function(){var t=this;return t.getRouter().restore(),t},redirectTo:function(e){return t.location.hash=e,this}}),t.yamvc.Controller=e}(window),function(t){"use strict";function e(){for(var t=0,e=s.length;e>t;t++)s[t]()}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var r,i,o=t.yamvc||{},s=[];o.onReady=function(t){s.push(t),i||"complete"===document.readyState||(i=setInterval(function(){"complete"===document.readyState&&(clearInterval(i),e())},10))},r=o.Core||function(){function t(){this.set("listeners",{}),this.bindMethods.apply(this,arguments),this.init.apply(this,arguments)}return t.prototype.init=function(){},t.prototype.initConfig=function(){var t,e,n,r=this,i=r.get("config"),o=function(n){t="get"+n.charAt(0).toUpperCase()+n.slice(1),e="set"+n.charAt(0).toUpperCase()+n.slice(1),r[t]=function(){return r.get("config")[n]},r[e]=function(t){var e=r.get("config")[n];t!==e&&(r.get("config")[n]=t,r.fireEvent(n+"Change",this,t,e))}};for(n in i)i.hasOwnProperty(n)&&o(n)},t.prototype.bindMethods=function(t){for(var e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(this[e]=t[e].bind(this),delete t[e])},t.prototype.onChange=function(t,e){return this.addListener(t+"Change",e),this},t.prototype.unbindOnChange=function(t,e){for(var n=this._listeners[t+"Change"]||[],r=0,i=n.length;i>r;r++)n[r]===e&&n.splice(r,1);return this._listeners[t+"Change"]=n,this},t.mixin=function(t,e){var n,r;e?n="function"==typeof t?t.prototype:t:(e="function"==typeof t?t.prototype:t,n=this.prototype);for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r])},t.__mixins__=[],t.__defaults__={},t.extend=function(e){e=e||{};var r=this,i=function(){var e;this._config={};for(e in o)u.call(o,e)&&(this._config[e]=o[e]);t.apply(this,arguments)},o=n(e.defaults||{},r.__defaults__),s=e.mixins||[],a=e.static||{},u={}.hasOwnProperty,c=function(n,r){function i(){this.constructor=n}for(var c in r)u.call(r,c)&&(n[c]=r[c]);i.prototype=r.prototype,n.Parent=r.prototype,n.prototype=new i,n.extend=t.extend,n.mixin=t.mixin,n.__mixins__=[],n.__defaults__=o;for(var f in e)u.call(e,f)&&"function"==typeof e[f]&&(n.prototype[f]=e[f]);for(;s.length;)n.mixin(s.pop());for(var l in a)u.call(a,l)&&(n["$"+l]=a[l]);return n};return c(i,r),i},t.mixin(o.mixins.GetSet),t.mixin(o.mixins.Observable),t}(),o.Core=r,o.merge=n,t.yamvc=o}(window),function(t){"use strict";var e,n,r=t.yamvc||{};n={PENDING:0,SUCCESS:1,FAIL:2},e=r.Core.extend({defaults:{propertyResults:"results",status:n.PENDING},init:function(t){var n,i=this;e.Parent.init.apply(this,arguments),t=t||{},n=r.merge(i._config,t.config),i.set("initOpts",t),i.set("config",n),i.initConfig()},initConfig:function(){var t=this;e.Parent.initConfig.call(this),t.set("lastResponse",{})},read:function(t){if(!t)throw Error("namespace should be set")},create:function(t,e){if(!t)throw Error("namespace should be set");if(!e||"object"!=typeof e)throw Error("Data should be pass as object")},update:function(){},destroy:function(){},setResponse:function(t){return this.set("response",t)},getResponse:function(){return this.get("response")}}),e.Status=n,t.yamvc=r,t.yamvc.data=t.yamvc.data||{},t.yamvc.data.Proxy=e}(window),function(t){"use strict";var e,n=t.yamvc||{},r=n.data.Proxy;e=r.extend({"static":{clear:function(t){var e,n=0;if(t)for(Array.isArray(t)||(t=[t]),n=t.length;n--;)e=t[n],delete localStorage[e],delete localStorage[e+"$Sequence"];else for(var r in localStorage)delete localStorage[r],delete localStorage[r+"$Sequence"]}},init:function(){var t=this;e.Parent.init.apply(t,arguments)},initConfig:function(){e.Parent.initConfig.apply(this)},read:function(t,n,r){var i=this;return e.Parent.read.apply(this,arguments),"object"==typeof n?i.readBy(t,n,r):i.readById(t,n,r),i},readBy:function(t,e,n){var r,i,o,s,a,u,c,f=this,l=e.limit||null,d=e.offset||0,h=e.filters||[],p=e.sorters||[],g={},v=[],y=[],m=!0;return a=function(t,e){var n=""+t[o],r=""+e[o],i=n.toLowerCase(),s=r.toLowerCase();return(i>s?1:s>i?-1:n>r?1:r>n?-1:0)*("desc"===u.toLowerCase()?-1:1)},r=function(){if(localStorage[t]){y=JSON.parse(localStorage[t]);for(var e=0,r=y.length;r>e;e++){for(m=!0,c=h.length;c--;)i=h[c].length>3?h[c][0]:"&&","&&"===i?m=f.executeCondition(y[e],h[c])&&m:"||"===i&&(m=f.executeCondition(y[e],h[c])||m);m&&v.push(y[e])}for(y=v,c=p.length;c--;)s=p[c],o=s[0],u=s[1]||"ASC",y.sort(a);l||(l=y.length-d),(d>0||l)&&(y=y.splice(d,l))}g.success=!0,g.result=y,n(f,g)},setTimeout(r,0),f},readById:function(t,n,r){var i,o=this,s=[],a={},u={};return i=function(){if(localStorage[t]){s=JSON.parse(localStorage[t]);for(var i=0,c=s.length;c>i;i++)s[i].id===n&&(a=s[i]);if(a.id!==undefined)return o.setStatus(e.Status.SUCCESS),u.success=!0,u.result=a,r(o,u),o}o.setStatus(e.Status.FAIL),u.success=!1,u.error=Error("Not found"),r(o,u)},setTimeout(i,0),o},executeCondition:function(t,e){var n,r,i,o,s=!1;switch(e.length>3?(r=e[1],n=e[2],i=e[3]):(r=e[0],n=e[1],i=e[2]),n){case">":t[r]>i&&(s=!0);break;case"<":i>t[r]&&(s=!0);break;case">=":t[r]>=i&&(s=!0);break;case"<=":i>=t[r]&&(s=!0);break;case"like":"%"!==i.charAt(0)&&(i="^"+i),"%"!==i.charAt(i.length-1)&&(i+="$"),i=i.replace(/%/g,""),o=RegExp(i),o.test(t[r])&&(s=!0)}return s},create:function(t,n,r){var i,o=this,s=[],a=0,u={};if(e.Parent.create.apply(this,arguments),localStorage[t]&&(s=JSON.parse(localStorage[t]),a=localStorage[t+"$Sequence"]),Array.isArray(n))for(var c=0,f=n.length;f>c;c++)n[c].id=a++,s.push(n[c]);else n.id=a++,s.push(n);return i=function(){try{o.setStatus(e.Status.SUCCESS),localStorage[t]=JSON.stringify(s),localStorage[t+"$Sequence"]=a,u.success=!0,u.result=n}catch(i){o.setStatus(e.Status.FAIL),u.success=!1,u.error=i}o.setResponse(u),r(o,u)},setTimeout(i,0),o},update:function(t,n,r){var i,o,s,a,u=this,c=[],f={},l={};return a=function(){if(localStorage[t]){if(c=JSON.parse(localStorage[t]),Array.isArray(n)){for(o=n.length;o--;)for(s=c.length,i=n[o].id;s--;)c[s].id===i&&(c[s]=n[o]);f=c}else for(o=c.length,i=n.id;o--;)c[o].id===i&&(f=c[o]=n);try{u.setStatus(e.Status.SUCCESS),localStorage[t]=JSON.stringify(c),l.success=!0,l.result=f}catch(a){u.setStatus(e.Status.FAIL),l.success=!1,l.error=a}return r(u,l),u}u.setStatus(e.Status.FAIL),l.success=!1,l.error=Error("Not found"),r(u,l)},setTimeout(a,0),u},destroy:function(t,n,r){var i,o,s,a,u=this,c=[],f={};return a=function(){if(localStorage[t]){if(c=JSON.parse(localStorage[t]),Array.isArray(n))for(o=n.length;o--;)for(s=c.length,i=n[o].id;s--;)c[s].id===i&&c.splice(s,1);else for(o=c.length,i=n.id;o--;)c[o].id===i&&c.splice(o,1);try{u.setStatus(e.Status.SUCCESS),localStorage[t]=JSON.stringify(c),f.success=!0}catch(a){u.setStatus(e.Status.FAIL),f.success=!1,f.error=a}return r(u,f),u}u.setStatus(e.Status.FAIL),f.success=!1,f.error=Error("Not found"),r(u,f)},setTimeout(a,0),u}}),t.yamvc=n,t.yamvc.data=t.yamvc.data||{},t.yamvc.data.proxy=t.yamvc.data.proxy||{},t.yamvc.data.proxy.Localstorage=e}(window),function(t){"use strict";var e,n=t.yamvc||{},r=n.mixins||{};e={set:function(t,e){var n="_"+t,r=this[n];return e!==r&&(this[n]=e,this.fireEvent(t+"Change",this,e,r)),this},get:function(t){return this["_"+t]}},r.GetSet=e,t.yamvc=n,t.yamvc.mixins=r}(window),function(t){"use strict";var e,n=t.yamvc||{},r=n.mixins||{};e={init:function(){this.set("listeners",{}),this.set("suspendEvents",!1)},fireEvent:function(){if(this._suspendEvents)return!0;for(var t=!0,e=Array.prototype.shift,n=e.call(arguments),r=0,i=this._listeners[n]||[],o=i.length;o>r;r++)if(t){var s=e.call(arguments);t=i[r].apply(s,arguments),t=t===undefined?!0:t}return t},addListener:function(t,e){var n=this._listeners[t]||[];return n.push(e),this._listeners[t]=n,this},removeListener:function(t,e){var n,r=this._listeners;if(r)if(e){if("function"==typeof e)for(var i=0,o=r.length;o>i;i++)r[i]===e&&(n=i);else n=e;r.splice(n,1)}else this._listeners=[];return this},suspendEvents:function(t){return t=t||!0,this.set("suspendEvents",t),this}},r.Observable=e,t.yamvc=n,t.yamvc.mixins=r}(window),function(t){"use strict";var e,n=t.yamvc||{};e=n.Core.extend({defaults:{idProperty:"id",proxy:null},init:function(t){n.Core.prototype.init.apply(this,arguments);var e,r=this;t=t||{},e=n.merge(r._config,t.config),r.set("initOpts",t),r.set("config",e),r.set("isDirty",!0),r.initConfig(),r.initData()},initConfig:function(){var t=this,e=t.get("config");if(n.Core.prototype.initConfig.apply(this),!e.namespace)throw Error("Model need to have namespace property in your model configuration");return this},initData:function(){var t=this,e=t.get("initOpts");t.get("config"),t.set("data",e.data||{})},setDataProperty:function(t,e){var n=this,r=n._data,i=r[t];e!==i&&(r[t]=e,n.set("isDirty",!0),n.fireEvent("data"+t.charAt(0).toUpperCase()+t.slice(1)+"Change",n,e,i))},getDataProperty:function(t){var e=this;return e.get("data")[t]},data:function(){var t=arguments.length;return t>1?this.setDataProperty.apply(this,arguments):this.getDataProperty.apply(this,arguments)},setData:function(t){var e,n=this,r=n.get("data");for(e in t)t.hasOwnProperty(e)&&n.setDataProperty(e,t[e]);n.fireEvent("dataChange",n,r)},clear:function(){var t,e=this,n=e.get("data");for(t in n)n.hasOwnProperty(t)&&e.data(t,null);e.set("data",{}),e.fireEvent("dataChange",e,n)},load:function(t){var e,r,i,o=this,s=o.get("data"),a=o.getIdProperty(),u=n.Promise.deferred(),c=0;for(i in t)c++;if(0===c&&s[a]===undefined)throw Error("You need to pass at least one condition to load model");return 0===c&&(t[a]=s[a]),e=function(){"success"===o.getProxy().getStatus()?(r=o.getProxy().getResponse(),o.set("isDirty",!1),o.set("data",r),u.resolve({scope:o,response:r,action:"read"}),o.fireEvent("loaded",o,r,"read")):(u.reject({scope:o,action:"read"}),o.fireEvent("error",o,"read"))},o.getProxy().read(o.getNamespace(),t,e),u.promise},save:function(){var t,e,r,i=this,o=i.get("data"),s=i.getIdProperty(),a=n.Promise.deferred(),u=i.getProxy();return i.get("isProcessing")||!i.get("isDirty")?!1:(i.set("isProcessing",!0),e=function(){i.set("isProcessing",!1),i.getProxy().getStatus()===n.data.Proxy.Status.SUCCESS?(t=i.getProxy().getResponse(),i.set("isDirty",!1),i.set("data",t.result),a.resolve({scope:i,response:t,action:r}),i.fireEvent("saved",i,t,r)):(i.fireEvent("error",i,r),a.reject({scope:i,action:r}))},o[s]===undefined?(r="create",u.create(i.getNamespace(),o,e)):(r="update",u.update(i.getNamespace(),o,e)),a.promise)},remove:function(){var t,e=this,r=e.get("data"),i=e.getIdProperty(),o=n.Promise.deferred();if(r[i]===undefined)throw Error("Can not remove empty model");return t=function(){e.getProxy().getStatus()===n.data.Proxy.Status.SUCCESS?(e.set("isDirty",!1),e.set("data",{}),o.resolve({scope:e,action:"destroy"}),e.fireEvent("removed",e,"destroy")):(e.fireEvent("error",e,"destroy"),o.reject({scope:e,action:"destroy"}))},e.getProxy().destroy(e.getNamespace(),r,t),o.promise},hasId:function(){return!!this._data[this._config.idProperty]}}),t.yamvc=n,t.yamvc.Model=e}(window),function(t){"use strict";var e,n,r,i=t.yamvc||{};n={PENDING:0,FULFILLED:1,REJECTED:2},e=function(t){var e,i,o=this;o._state=n.PENDING,o._queue=[],e=function(t){r(o,t)},i=function(t){o.transition(n.REJECTED,t)},t&&t(e,i)},e.prototype.transition=function(t,e){var r=this;return r._state==t||r._state!==n.PENDING||t!=n.FULFILLED&&t!=n.REJECTED||2>arguments.length?!1:(r._state=t,r._value=e,r.run(),undefined)},e.prototype.run=function(){var t,e,i,o=this;e=function(t){return t},i=function(t){throw t},o._state!=n.PENDING&&setTimeout(function(){for(;o._queue.length;){var s=o._queue.shift();try{t=(o._state==n.FULFILLED?s.fulfill||e:s.reject||i)(o._value)}catch(a){s.promise.transition(n.REJECTED,a);continue}r(s.promise,t)}},0)},e.prototype.then=function(t,n){var r=this,i=new e;return r._queue.push({fulfill:"function"==typeof t&&t,reject:"function"==typeof n&&n,promise:i}),r.run(),i},e.prototype.resolve=function(t,i){if(t===i)t.transition(n.REJECTED,new TypeError);else if(i&&i.constructor==e)i.state==n.PENDING?i.then(function(e){r(t,e)},function(e){t.transition(n.REJECTED,e)}):t.transition(i.state,i.value);else if("object"!=typeof i&&"function"!=typeof i||null===i)t.transition(n.FULFILLED,i);else{var o=!1;try{var s=i.then;"function"==typeof s?s.call(i,function(e){o||(r(t,e),o=!0)},function(e){o||(t.transition(n.REJECTED,e),o=!0)}):t.transition(n.FULFILLED,i)}catch(a){o||t.transition(n.REJECTED,a)}}},e.prototype.getState=function(){return this._state},r=e.prototype.resolve,e.State=n,e.resolved=function(t){return new e(function(e){e(t)})},e.rejected=function(t){return new e(function(e,n){n(t)})},e.deferred=function(){var t,n;return{promise:new e(function(e,r){t=e,n=r}),resolve:t,reject:n}},i.Promise=e,t.yamvc=i}(window),function(t){"use strict";var e,n=t.yamvc||{};e=n.Core.extend({init:function(){this.set("routing",{}),this.bindEvents()},bindEvents:function(){return t.onhashchange=this.onHashChange.bind(this),this},onHashChange:function(){var e=this.get("routing"),n=t.location.hash.substr(1),r=n.split("/"),i=r.shift();if(e[i]){var o=[];if(e[i].params)for(var s=0,a=e[i].params.length;a>s;s++){var u=e[i].params[s],c=r[s],f=RegExp(u.substr(1,u.length-2));o.push(c.match(f).input)}e[i].callback.apply(null,o)}return this},restore:function(){return this.onHashChange(),this},when:function(t,e){var n=this.get("routing"),r=t.split("/"),i=r.shift();return n[i]={callback:e,params:r},this.set("routing",n),this}}),t.yamvc.Router=e}(window),function(t,e){"use strict";function n(t){for(var e={},n=t.split(","),r=0;n.length>r;r++)e[n[r]]=!0;return e}var r,i,o,s,a=t.yamvc||{},u=0;s=n("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),r={views:{},i:0,add:function(t,e){this.views[t]=e,this.i++},get:function(t){return this.views[t]}},i={tpl:{},add:function(t,e){this.tpl[t]=e},get:function(t){return this.tpl[t]}},o=a.Core.extend({init:function(t){a.Core.prototype.init.apply(this);var e,n,i=this;return t=t||{},e=a.merge(i._config,t.config),e.id=n=e.id||"view-"+r.i,e.views=e.views||{},i.set("initOpts",t),i.set("config",e),i.initConfig(),r.add(n,i),i},initConfig:function(){return a.Core.prototype.initConfig.apply(this),this.initTemplate(),this.initModels(),this},initTemplate:function(){var t,e=this,n=e.get("config"),r=document.createElement("div");if(!n.tpl)throw Error(n.id+": no tpl set");if(!i.get(n.tpl)){if(t=document.getElementById(n.tpl),!t)throw Error("no tpl "+n.tpl+" found");i.add(n.tpl,t.parentNode.removeChild(t))}return r.innerHTML=i.get(n.tpl).innerHTML,e.set("tpl",r),e},initModels:function(){var t,e,n=this;if(!n.getModels)return n;t=n.getModels();for(e in t)t.hasOwnProperty(e)&&n.setModel(e,t[e]);return n},setModel:function(t,e){var n=this,r=n.getModels();return r[e.getNamespace()]=e,n.setModels(r),n},getModel:function(t){var e=this,n=e.getModels();return n[t]},render:function(t){var n,r,i,o,a,c,f,l,d,h=this,p=h._tpl,g=h._config,v=g.renderTo,y=t||g.models,m=g.parent,C=g.parent,w=[],S=[],E=0,_=0,P=0,D=0,x=[];for(m?m=v&&m.queryEl(v)?m.queryEl(v):m._el:v&&(m=document.querySelector(v)),a=p.cloneNode(!0),c=document.createTreeWalker(a,NodeFilter.SHOW_ALL,null,!1),f=c.nextNode();f;){if(3===f.nodeType){if(n=f.data.match(/\{\{(.*?)\}\}/gi)){var O=f.nodeValue,b=document.createElement("span"),N="v-r-b-"+u++;for(E=0,D=n.length,S=[],b.setAttribute("id",N);D>E;)r=n[E++],i=r.substr(2,r.length-4).split("."),y[i[0]]?(o=y[i[0]].data(i[1]),o===e&&(o="")):o="",O=O.replace(r,o),S.push(i);b.appendChild(document.createTextNode(O)),w.push({original:f.nodeValue,headers:S,type:3,pointer:b,oldDOM:f})}}else for(x=f.attributes,_=x.length;_--;)if(d=x.item(_),n=d.nodeValue&&d.nodeValue.match(/\{\{(.*?)\}\}/gi)){var A=d.nodeValue,I=s[d.nodeName];for(E=0,D=n.length,S=[],o=I?!0:"";D>E;)r=n[E++],i=r.substr(2,r.length-4).split("."),I?o=o&&y[i[0]].data(i[1]):(y[i[0]]&&(o=y[i[0]].data(i[1])||""),d.nodeValue=d.nodeValue.replace(r,o)),S.push(i);I&&!o?f.removeAttribute(d.nodeName):f.setAttribute(d.nodeName,o),w.push({original:A,headers:S,fillAttr:I||!1,type:2,attrName:d.nodeName,pointer:f})}f=c.nextNode()}for(;p.childNodes.length>P&&1!==p.childNodes.item(P).nodeType;)P++;return l=a.childNodes.item(P),l.setAttribute("yamvc-id",g.id),h.set("el",l),h.set("bindings",w),h.resolveBindings(),m&&(m.appendChild(l),C&&(C.views=C.views||{},C.views[g.id]=h),h.set("isInDOM",!0),h.reAppendChildren(),h.fireEvent("render",null,h)),l},resolveBindings:function(){var t,e,n,r,i,o,s=this,a=s._bindings,u=s._config.models,c=0,f=0;for(t=function(t){return function(){s.partialRender(t)}},f=a.length;f--;)for(i=a[f],n=i.headers,3===i.type&&(i.oldDOM.parentNode.replaceChild(i.pointer,i.oldDOM),delete i.oldDOM),c=n.length;c--;)e=u[n[c][0]],r=n[c][1],e&&(o=r.charAt(0).toUpperCase()+r.slice(1),e.addListener("data"+o+"Change",t(i)))},partialRender:function(t){for(var e,n=3===t.type,r=n?t.original:!0,i=this._config.models,o=t.headers,s=o.length;s--;)e=o[s],r=n||!t.fillAttr?r.replace("{{"+e.join(".")+"}}",i[e[0]].data(e[1])):r&&i[e[0]].data(e[1]);n?t.pointer.textContent=r:t.fillAttr&&!r?t.pointer.removeAttribute(t.attrName):t.pointer.setAttribute(t.attrName,r)},queryEl:function(t){return this.get("el").querySelector(t)},queryEls:function(t){return this.get("el").querySelectorAll(t)},getChild:function(t){var e=this,n=e.get("config");return!n.views||n.views&&!n.views[t]?!1:n.views[t]},addChild:function(t,e){var n=this;return t.appendTo(n,e),n.fireEvent("elementAdded",n,t),n},removeChildren:function(){for(var t=this.get("config").views||[],e=0,n=t.length;n>e;e++)t[e].clear();return this},clear:function(){var t=this,e=t.get("el");return t.isInDOM()&&(e.parentNode.removeChild(e),t.set("isInDOM",!1)),t},isInDOM:function(){return this._isInDOM},appendTo:function(t,e){var n=this,r=n.get("config"),i=r.id,o=t.get("config").views,s=e?t.get("el").querySelector(e):t.get("el");return e&&(r.renderTo=e),r.parent?r.parent&&r.parent.get("config").id!==t.get("config").id&&delete r.parent.get("config").views[i]:r.parent=t,!n.isInDOM()&&t.isInDOM()&&(n.get("el")?(s.appendChild(n.get("el")),n.set("isInDOM",!0),n.reAppendChildren(),n.fireEvent("render",null,n)):n.render()),o[i]=n,r.parent=t,n},reAppendChildren:function(){var t=this.get("config").views;for(var e in t)t.hasOwnProperty(e)&&t[e].appendTo(this);return this},show:function(){var t,e=this;return e.isInDOM()?(t=e.get("el").style,t.display="block",e.set("visible",!0),e.fireEvent("show",e,t),e):e},hide:function(){var t,e=this;return e.isInDOM()?(t=e.get("el").style,t.display="none",e.set("visible",!1),e.fireEvent("hide",e,t),e):e},isVisible:function(){return this.get("visible")&&this.isInDOM()}}),a.ViewManager=r,t.yamvc=a,t.yamvc.View=o}(window);
//@ sourceMappingURL=YAMVC-v0.1.9.min.js.map